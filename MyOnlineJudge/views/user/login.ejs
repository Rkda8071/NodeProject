<!DOCTYPE html>
<html lang="en">
<%- include("../header"); %>
<body>
    <%- include("../menu"); %>
    <!-- Material form register -->
<div class="card" style="margin-top: 100px; margin-left: 50px; margin-right:50px">
    <!--nav class="navbar navbar-expand-lg navbar-light warning-color lighten-5" -->
    <h5 class="card-header warning-color lighten-5 info-color white-text text-center py-4">
        <strong>login</strong>
    </h5>

    <!--Card content-->
    <div class="card-body px-lg-5 pt-0" style="margin-top: 30px;">

        <!-- Form -->
        <form 
            id = "loginForm"
            class="text-center" 
            style="color: #757575;" 
            action="#!"
        >
            <!-- E-mail -->
            <div class="md-form mt-0">
                <input 
                    type="email" 
                    id="email" 
                    class="form-control"
                    required
                >
                <label for="materialRegisterFormEmail">E-mail</label>
            </div>

            <!-- Password -->
            <div class="md-form">
                <input 
                    type="password" 
                    id="password" 
                    class="form-control" 
                    required
                    aria-describedby="materialRegisterFormPasswordHelpBlock"
                >
                <label for="password">Password</label>
            </div>

            <!-- login button -->
            <button 
                class="btn btn-outline-info btn-rounded btn-block my-4 waves-effect z-depth-0" 
                type="submit"
            >
            login            
            </button>
        </form>
        <!-- Form -->

    </div>

</div>
<!-- Material form register -->
    <!-- End your project here-->
    <%- include("../footer"); %>
    <script>
        $(function(){
            $("#loginForm").submit((event) => {
                event.preventDefault();
                //console.log("called");
                //const name = $("#name").val();
                const email = $("#email").val();
                const password = $("#password").val();
                
                $.ajax({
                    url: "/api/user/login",
                    type: "POST",
                    data : { email, password },
                }).done(() => {
                    alert("로그인 성공");
                    location.href = "/";
                }).fail((request, status, error) => {
                    alert(request.responseText); 
                });
                //console.log(singer,title);
            });
        });
    </script>

</body>
</html>
